# SDK 能力对比分析：自研 SDK vs MipMap Engine SDK

**日期：** 2026-01-30
**目的：** 分析自研 3D Reconstruction SDK 与商业 MipMap Engine SDK 的能力差异，明确当前差距与后续发展方向。

---

## 1. 总体定位

| 维度 | 自研 SDK | MipMap Engine SDK |
| :--- | :--- | :--- |
| **定位** | 轻量级开源方案，面向快速原型验证 | 商业级专业引擎，面向生产环境 |
| **架构** | Python + Docker 容器编排 (DooD) | 原生 C++ 引擎 + CLI |
| **许可** | 开源/内部使用 | 商业授权 |

---

## 2. 功能对比

### ✅ 共同支持

| 功能 | 自研 SDK | MipMap SDK | 备注 |
| :--- | :---: | :---: | :--- |
| 空中三角测量 (SfM) | ✅ | ✅ | 自研使用 OpenSfM/ODM |
| 高斯泼溅 (Gaussian Splatting) | ✅ | ✅ | 自研使用 OpenSplat |
| 稀疏点云生成 | ✅ | ✅ | - |
| GPS/POS 数据利用 | ✅ | ✅ | 加速空三匹配 |
| CLI 命令行调用 | ✅ | ✅ | - |
| Docker 容器化部署 | ✅ | ✅ | MipMap 支持 Linux Docker |
| GPU 加速 | ✅ | ✅ | 自研已实现 GPU 探测与回退 |

### ❌ 自研 SDK 尚不支持

| 功能 | MipMap SDK | 差距说明 |
| :--- | :--- | :--- |
| **多相机组 (group)** | ✅ 支持 nadir/oblique 等分组 | 自研目前仅支持单一相机源 |
| **实时重建** | ✅ "边飞边出图" | 自研为离线批处理模式 |
| **激光雷达 (LiDAR) 输入** | ✅ 支持点云输入 | 自研仅支持图像输入 |
| **控制点 (GCP) 优化** | ✅ OptimizeAT 接口 | 自研无 GCP 支持 |
| **大规模分块 (DivideTiles)** | ✅ 自动分块并行 | 自研无分块机制 |
| **OSGB / 3D Tiles 输出** | ✅ 行业标准格式 | 自研仅输出 `.ply` |
| **正射影像 (DOM) / DSM** | ✅ GeoTIFF 输出 | 自研不生成二维成果 |
| **OBJ / LAS 格式** | ✅ 通用格式 | 自研暂不支持 |
| **交互式配置生成器** | ✅ Web 页面 | 自研需手写 YAML |
| **Windows 原生执行** | ✅ .exe | 自研目前依赖 Docker |

---

## 3. 配置参数对比

| 参数类别 | 自研 SDK | MipMap SDK |
| :--- | :--- | :--- |
| **重建质量** | `quality_preset: high/medium/low` | `resolution_level: 1/2/3` |
| **坐标系** | 未支持 | `coordinate_system` + EPSG |
| **图像输入** | `input_images_dir` 目录 | `image_meta_data` 数组 (支持分组) |
| **成果控制** | `run_gaussian`, `run_mesh` | `generate_osgb`, `generate_3d_tiles`, `generate_gs_ply` 等 10+ 开关 |
| **深度参数** | `params.opensfm`, `params.opensplat` | `高级参数` 页面 |

---

## 4. 技术架构对比

```
┌──────────────────────────────────────────────────────────────────────────┐
│                           自研 SDK 架构                                   │
├──────────────────────────────────────────────────────────────────────────┤
│  Python 调度层 (main.py, pipeline.py)                                    │
│       │                                                                  │
│       ▼                                                                  │
│  ┌─────────────┐         ┌─────────────┐         ┌─────────────┐        │
│  │ OpenSfM/ODM │────────►│ OpenSplat   │────────►│ 最终成果     │        │
│  │ (空三重建)   │         │ (高斯泼溅)   │         │             │        │
│  └─────────────┘         └─────────────┘         └─────────────┘        │
│        │                       │                       │                │
│        ▼                       ▼                       ▼                │
│  ┌───────────────────────────────────────────────────────────────┐      │
│  │ 输出成果：                                                      │      │
│  │  • reconstruction.json (相机位姿 + 稀疏点云)                    │      │
│  │  • 3D 网格模型 (run_mesh=true 时，含纹理)                       │      │
│  │  • splat.ply (高斯泼溅模型)                                     │      │
│  │  • odm_report/ (质量报告)                                       │      │
│  └───────────────────────────────────────────────────────────────┘      │
│       │                                                                  │
│       └───────────────────── Docker 容器 (DooD) ────────────────────────│
└──────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                      MipMap SDK 架构                             │
├─────────────────────────────────────────────────────────────────┤
│  reconstruct_full_engine.exe (原生 C++)                         │
│       │                                                         │
│       ▼                                                         │
│  ┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐      │
│  │ AT计算  │───►│ 密集匹配 │───►│ 网格生成 │───►│ 多格式   │      │
│  └─────────┘    └─────────┘    └─────────┘    │ 输出     │      │
│       │              │              │         └─────────┘      │
│       └──────────────┴──────────────┴──── 原生多线程 ──────────│
└─────────────────────────────────────────────────────────────────┘
```

---

## 5. 发展建议

### 短期 (1-2 周)
1. **多格式输出**：增加 OBJ 导出（可通过 Open3D 或 trimesh 转换 PLY）
2. **配置生成器**：编写简单的 Python 脚本扫描 images 目录自动生成 config.yaml

### 中期 (1-2 月)
3. **多相机支持**：在 `image_meta_data` 中增加 `group` 字段
4. **坐标系支持**：集成 pyproj 实现 EPSG 坐标转换
5. **Windows 原生化**：编译 OpenSfM/OpenSplat 为 Windows 可执行文件

### 长期 (3+ 月)
6. **LiDAR 支持**：接入 PDAL 或 Open3D 处理点云
7. **大规模分块**：实现 DivideTiles 类似的分块并行机制
8. **实时重建**：探索流式处理架构

---

## 6. 总结

自研 SDK 已具备**核心重建能力**（SfM + Gaussian Splatting），并在**容器化部署**和**GPU 兼容性**方面做了工程化增强。与 MipMap 的主要差距在于：
- **输出格式单一**（仅 PLY）
- **缺乏 GIS 相关能力**（坐标系、正射影像）
- **不支持多相机和 LiDAR**

当前 SDK 适合**快速原型验证**和**高斯泼溅实验**，后续可根据业务需求逐步补齐能力。
